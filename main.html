<!DOCTYPE html>
<html>
          <head>
        <link rel="shortcut icon" href="#"/>
	<script type="text/javascript" src="test.js"></script>
	<script
	  type="text/javascript"
	  src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js">
	</script>
	<script type="text/javascript">
	  (function () {
		emailjs.init('TuJVxAdKWcKv94Keu');
	  })();
	</script>
                     <meta charset="utf-8">
                          <title>神經網路生成服裝主觀評比問卷</title>
		     <style>
			.left {
			  text-align: center;
			  margin-top: 10px;
			  margin-left:50px;
			  display: inline-block;
			  width:600px;
			  height:550px;
			  vertical-align: top;
			}
			.right{
			  text-align: center;
			  margin-top: 10px;
		      margin-left: 70px;
			  display: inline-block;
			  width:600px;
			  height:550px;
			  vertical-align: top;
			     }
			.topborder{
			  border: 1px outset black;
			  text-align: center;
			  margin-top: 5px;
			  margin-left:50px;
			  width: 1400px;
			  vertical-align:top;			
			}
		    .top{
			  text-align: center;
			  margin-top: 5px;
			  margin-left:50px;
			  width: 1400px;
			  vertical-align:top;
			}
		    .top2{
			  text-align: center;
			  margin-top: 10px;
			  margin-left:50px;
			  width: 1400px;
			  vertical-align:top;
			}
			.middle{
			  border: 1px outset black;
			  text-align: center;
			  margin-top: 5px;
			  margin-left:50px;
			  width: 1400px;
			  vertical-align:top;
			}
			.bob-container{
				margin: 0 auto;
				padding-left: 15px;
				padding-right: 15px;
			}
			.bob-row{
				margin-right: -15px;
				margin-left: -15px;
			}
			.choice{
			  text-align: center;
			  width: 220px;
			  margin-top: 5px;
			  margin-left: 5px;
			  display: inline-block;
			  vertical-align: top;
			}
		   .question{
			  text-align: center;
			  width: 260px;
			  margin-top: 5px;
			  margin-left: 5px;
			  display: inline-block;
			  vertical-align: top;
			}
		   .progresslabel{
			  text-align: center;
			  width: 210px;
			  margin-top: 0px;
			  margin-left: 20px;
			  display: inline-block;
			  vertical-align: top;
			     }
		   .progressbefore{
			  border: 5px double black;
			  text-align: center;
			  height: 0px;
			  width: 200px;
			  margin-top: 5px;
			  margin-left: 20px;
			  display: inline-block;
			  vertical-align: top;
			}
		   .progressafter{
			  border: 5px solid blue;
			  text-align: center;
			  width: 200px;
			  height: 0px;
			  margin-top: 5px;
			  margin-left: 20px;
			  display: inline-block;
			  vertical-align: top;
			}			     
		     </style>
		  
                            </head>
                              <body>
				<tbody>
					<h3>神經網路生成服裝主觀評比問卷</h3>
					<h4>測試方式:</h4>
					<h5>每組服裝中，分為上、下兩套，選擇該組服裝中搭配較適合的一套。</h5><br>	
				<!--
				<div class="middle">
				<h3>神經網路生成服裝主觀評比問卷</h3>

				<div class="middle">
				<h4>測試方式:</h4>
				<h5>每組服裝中，分為上、下兩套，選擇該組服裝中搭配較適合的一套。</h5><br>
				</div>
				</div>-->
				
			
            <div>
            <div class="top">
		    <hr id="pg1" class="progressafter" width="100%" SIZE=3>
		    <hr id="pg2" class="progressbefore" width="100%" SIZE=3>
		    <hr id="pg3" class="progressbefore" width="100%" SIZE=3>
		    <hr id="pg4" class="progressbefore" width="100%" SIZE=3>
			<hr id="pg5" class="progressbefore" width="100%" SIZE=3>             
	    </div> 
	    <div class="top">
	            <label class="progresslabel">第1頁</label>
	            <label class="progresslabel">第2頁</label>
	            <label class="progresslabel">第3頁</label>
	            <label class="progresslabel">第4頁</label>
				<label class="progresslabel">第5頁</label>
            </div>		    
		    
            <form>
				<div class="top2">
					<fieldset id="sample1">
					<legend>Sample-1</legend>
					
					<!-- 2個並排 -->                       <!-- https://codepen.io/bob-cat/pen/XdbEaa --> <!--<div style="height:43px;">挖系標題挖系標題挖系標題挖系標題挖系標題挖系標題挖系標題挖系標題</div>-->
					<div class="bob-container"> 
					<!--<div class="bob-row">-->
					<img id="pic-1-1" src="" height="200px">
					<h4>服裝1</h4>
					<br>
					<img id="pic-1-2" src="" height="200px">
					<h4>服裝2</h4>
					<br>
					<img id="pic-1-3" src="" height="200px">
					<h4>服裝3</h4>
						  				
					</div><div class="question"><fieldset id="outfit1">
					<legend>服裝</legend>
					<label><input type="radio" value="Input" name="outfit-1">服裝1</label>
					<label><input type="radio" value="Bi-Mix" name="outfit-1">服裝2</label>
					<label><input type="radio" value="HT" name="outfit-1">服裝3</label>
					</fieldset></div></fieldset></div>

				<div class="top2">
					<fieldset id="sample2">
					<legend>Sample-2</legend>
					
					<!-- 2個並排 -->                       <!-- https://codepen.io/bob-cat/pen/XdbEaa --> <!--<div style="height:43px;">挖系標題挖系標題挖系標題挖系標題挖系標題挖系標題挖系標題挖系標題</div>-->
					<div class="bob-container"> 
					<!--<div class="bob-row">-->
					
					<img id="pic-2-1" src="" height="200px">
					<h4>服裝1</h4>
					<br>
					<img id="pic-2-2" src="" height="200px">
					<h4>服裝2</h4>
					<br>
					<img id="pic-2-3" src="" height="200px">
					<h4>服裝3</h4>
						  				
					</div><div class="question"><fieldset id="outfit2">
					<legend>服裝</legend>
					<label><input type="radio" value="Input" name="outfit-2">服裝1</label>
					<label><input type="radio" value="Bi-Mix" name="outfit-2">服裝2</label>
					<label><input type="radio" value="HT" name="outfit-2">服裝3</label>
					</fieldset></div></fieldset></div>


				<div class="top2">
					<fieldset id="sample3">
					<legend>Sample-3</legend>
						
					<!-- 2個並排 -->                       <!-- https://codepen.io/bob-cat/pen/XdbEaa --> <!--<div style="height:43px;">挖系標題挖系標題挖系標題挖系標題挖系標題挖系標題挖系標題挖系標題</div>-->
					<div class="bob-container"> 
					<!--<div class="bob-row">-->
					<img id="pic-3-1" src="" height="200px">
					<h4>服裝1</h4>
					<br>
					<img id="pic-3-2" src="" height="200px">
					<h4>服裝2</h4>
					<br>
					<img id="pic-3-3" src="" height="200px">
					<h4>服裝3</h4>
												  
					</div><div class="question"><fieldset id="outfit3">
					<legend>服裝</legend>
					<label><input type="radio" value="Input" name="outfit-3">服裝1</label>
					<label><input type="radio" value="Bi-Mix" name="outfit-3">服裝2</label>
					<label><input type="radio" value="HT" name="outfit-3">服裝3</label>
					</fieldset></div></fieldset></div>

				<div class="top2">
					<fieldset id="sample4">
					<legend>Sample-4</legend>
					
					<!-- 2個並排 -->                       <!-- https://codepen.io/bob-cat/pen/XdbEaa --> <!--<div style="height:43px;">挖系標題挖系標題挖系標題挖系標題挖系標題挖系標題挖系標題挖系標題</div>-->
					<div class="bob-container"> 
					<!--<div class="bob-row">-->
					<img id="pic-4-1" src="" height="200px">
					<h4>服裝1</h4>
					<br>
					<img id="pic-4-2" src="" height="200px">
					<h4>服裝2</h4>
					<br>
					<img id="pic-4-3" src="" height="200px">
					<h4>服裝3</h4>
						  				
					</div><div class="question"><fieldset id="outfit4">
					<legend>服裝</legend>
					<label><input type="radio" value="Input" name="outfit-4">服裝1</label>
					<label><input type="radio" value="Bi-Mix" name="outfit-4">服裝2</label>
					<label><input type="radio" value="HT" name="outfit-4">服裝3</label>
					</fieldset></div></fieldset></div>

				<div class="top2">
					<fieldset id="sample5">
					<legend>Sample-5</legend>
					
					<!-- 2個並排 -->                       <!-- https://codepen.io/bob-cat/pen/XdbEaa --> <!--<div style="height:43px;">挖系標題挖系標題挖系標題挖系標題挖系標題挖系標題挖系標題挖系標題</div>-->
					<div class="bob-container"> 
					<!--<div class="bob-row">-->
					<img id="pic-5-1" src="" height="200px">
					<h4>服裝1</h4>
					<br>
					<img id="pic-5-2" src="" height="200px">
					<h4>服裝2</h4>
					<br>
					<img id="pic-5-3" src="" height="200px">
					<h4>服裝3</h4>
						  				
					</div><div class="question"><fieldset id="outfit5">
					<legend>服裝</legend>
					<label><input type="radio" value="Input" name="outfit-5">服裝1</label>
					<label><input type="radio" value="Bi-Mix" name="outfit-5">服裝2</label>
					<label><input type="radio" value="HT" name="outfit-5">服裝3</label>
					</fieldset></div></fieldset></div>

				<div class="top2">
					<fieldset id="sample6">
					<legend>Sample-6</legend>
					
					<!-- 2個並排 -->                       <!-- https://codepen.io/bob-cat/pen/XdbEaa --> <!--<div style="height:43px;">挖系標題挖系標題挖系標題挖系標題挖系標題挖系標題挖系標題挖系標題</div>-->
					<div class="bob-container"> 
					<!--<div class="bob-row">-->
					<img id="pic-6-1" src="" height="200px">
					<h4>服裝1</h4>
					<br>
					<img id="pic-6-2" src="" height="200px">
					<h4>服裝2</h4>
					<br>
					<img id="pic-6-3" src="" height="200px">
					<h4>服裝3</h4>
						  				
					</div><div class="question"><fieldset id="outfit6">
					<legend>服裝</legend>
					<label><input type="radio" value="Input" name="outfit-6">服裝1</label>
					<label><input type="radio" value="Bi-Mix" name="outfit-6">服裝2</label>
					<label><input type="radio" value="HT" name="outfit-6">服裝3</label>
					</fieldset></div></fieldset></div>

				<div class="top2">
					<fieldset id="sample7">
					<legend>Sample-7</legend>
					
					<!-- 2個並排 -->                       <!-- https://codepen.io/bob-cat/pen/XdbEaa --> <!--<div style="height:43px;">挖系標題挖系標題挖系標題挖系標題挖系標題挖系標題挖系標題挖系標題</div>-->
					<div class="bob-container"> 
					<!--<div class="bob-row">-->
					<img id="pic-7-1" src="" height="200px">
					<h4>服裝1</h4>
					<br>
					<img id="pic-7-2" src="" height="200px">
					<h4>服裝2</h4>
					<br>
					<img id="pic-7-3" src="" height="200px">
					<h4>服裝3</h4>
						  				
					</div><div class="question"><fieldset id="outfit7">
					<legend>服裝</legend>
					<label><input type="radio" value="Input" name="outfit-7">服裝1</label>
					<label><input type="radio" value="Bi-Mix" name="outfit-7">服裝2</label>
					<label><input type="radio" value="HT" name="outfit-7">服裝3</label>
					</fieldset></div></fieldset></div>

				

    
            <div class="top">
            <p id="info">---</p>	
            <input width=200 height=100 type="button" id="send" onclick=updateAudio() value="下一頁">	
            </div>			

			
	        </div>


		
</body>
            <script>
			
			
			


			
			
			
			//image folder
			const img_folder = "https://github.com/YPChao1009/outfit/blob/master/.assets/";
			

			const img_file = [490, 0, 429, 1031, 1111, 1319, 1801]; 

			const img_name1 = [];
			const img_name2 = [];
			const img_name3 = [];
			
			for (let i=0;i<10;i++){
				img_name1.push('/'+img_file[i]+'/Score0.jpg?raw=true');
				img_name2.push('/'+img_file[i]+'/Bi-Mix.jpg?raw=true');
				img_name3.push('/'+img_file[i]+'/HT.jpg?raw=true');
			}
			var page_idx = 0;
			var img_1_1 = img_folder+img_name1[0];
			var img_1_2 = img_folder+img_name2[0];
			var img_1_3 = img_folder+img_name3[0];
			var img_2_1 = img_folder+img_name1[1];
			var img_2_2 = img_folder+img_name2[1];
			var img_2_3 = img_folder+img_name3[1];
			var img_3_1 = img_folder+img_name1[2];
			var img_3_2 = img_folder+img_name2[2];
			var img_3_3 = img_folder+img_name3[2];
			var img_4_1 = img_folder+img_name1[3];
			var img_4_2 = img_folder+img_name2[3];
			var img_4_3 = img_folder+img_name3[3];
			var img_5_1 = img_folder+img_name1[4];
			var img_5_2 = img_folder+img_name2[4];
			var img_5_3 = img_folder+img_name3[4];
			var img_6_1 = img_folder+img_name1[5];
			var img_6_2 = img_folder+img_name2[5];
			var img_6_3 = img_folder+img_name3[5];
			var img_7_1 = img_folder+img_name1[6];
			var img_7_2 = img_folder+img_name2[6];
			var img_7_3 = img_folder+img_name3[6];
			

			document.getElementById("pic-1-1").src = img_1_1;
			document.getElementById("pic-1-2").src = img_1_2;
			document.getElementById("pic-1-3").src = img_1_3;
			document.getElementById("pic-2-1").src = img_2_1;
			document.getElementById("pic-2-2").src = img_2_2;
			document.getElementById("pic-2-3").src = img_2_3;
			document.getElementById("pic-3-1").src = img_3_1;
			document.getElementById("pic-3-2").src = img_3_2;
			document.getElementById("pic-3-3").src = img_3_3;
			document.getElementById("pic-4-1").src = img_4_1;
			document.getElementById("pic-4-2").src = img_4_2;
			document.getElementById("pic-4-3").src = img_4_3;
			document.getElementById("pic-5-1").src = img_5_1;
			document.getElementById("pic-5-2").src = img_5_2;
			document.getElementById("pic-5-3").src = img_5_3;
			document.getElementById("pic-6-1").src = img_6_1;
			document.getElementById("pic-6-2").src = img_6_2;
			document.getElementById("pic-6-3").src = img_6_3;
			document.getElementById("pic-7-1").src = img_7_1;
			document.getElementById("pic-7-2").src = img_7_2;
			document.getElementById("pic-7-3").src = img_7_3;
			
			
			
			//store user choice into string
			var answer_str= "OutfitNameBefore,OutfitNameBi-Mix,OutfitNameHT,Better,";
			
			function storeContent(){
			  var tmp_str = "";
			  var outfit_files = [img_1_1,img_1_2,img_1_3,img_2_1,img_2_2,img_2_3,img_3_1,img_3_2,img_3_3,img_4_1,img_4_2,img_4_3,img_5_1,img_5_2,img_5_3,img_6_1,img_6_2,img_6_3,img_7_1,img_7_2,img_7_3];
			  var checked_list = [];
			  for (let i=1; i<8;i++){ 
			      var query_name = ["outfit-"+i]
				  var outfit_path = outfit_files[3*i-3];
				  var outfit_path1 = outfit_files[3*i-2];
				  var outfit_path2 = outfit_files[3*i-1];
				  var fashion = 'input[name="'+query_name[0]+'"]:checked';
				  
				  try{
					var better = document.querySelector(fashion).value;}
				  catch{
				    alert('請確認 sample-'+i+' 是否未完成!');
					return false;
				  }
                  tmp_str += `${outfit_path},${outfit_path1},${outfit_path2},${better},` ;
                  checked_list.push(`${fashion}`);
				  
			  }
			  
			  for (let c in checked_list){
				document.querySelector(checked_list[c]).checked = false;
			  }
			  
			  answer_str += tmp_str;
			  return true;		
			}
		   
		   //end the test and send email
		   function end() {
		   const d = new Date();
           var year = d.getFullYear();
		   var month = d.getMonth();
		   var day = d.getDate();
		   var hours = d.getHours();
		   var mins = d.getMinutes();
		   var timestr = `${year}${month}${day}_${hours}${mins}`;
		   var Gender = document.querySelector('input[name="gender"]:checked').value;
		   var Age = document.getElementById("age").value;
		   var userName = document.getElementById("username").value;
			
			var templateParams = {
				user_name: String(userName),
				age:String(Age),
				gender: String(Gender),
				date: String(timestr),
				content: String(answer_str)
			};
			const serviceID = 'service_rlekooc';                    
			const templateID = 'template_qd1rv19';                  
			emailjs.send(serviceID, templateID, templateParams)
				.then(function (response) {
					console.log('SUCCESS!', response.status, response.text);
				}, function (error) {
				        alert('error happened,please contact the author!');
					//console.log('FAILED...', error);
				});
			}
			
			
			//update audio source and provide user information
			function updateAudio(){
				var flag = storeContent();
				if (flag==true){
					if (page_idx<4){ //idx<11
						alert('剩餘'+(4-page_idx)+'頁；請繼續回答');
						model_folder = [];
						//image folder
						const img_folder = "https://github.com/YPChao1009/outfit/blob/master/.assets/";
			

						const img_file = ["59", "246", "454", "612", "1490", "1606", "1646", 
										  "2839", "552", "806", "1377", "1466", "1516", "1978", 
										  "2022", "2533", "2643", "2766", "2823", "1136", "b3135", 
										  "b3506", "b3749", "b3130", "b2848", "b3234", "b3714", "b302"]; 

						const img_name1 = [];
						const img_name2 = [];
						const img_name3 = [];
						var emo = 0;
						if (page_idx == 0) {
							idx=0;
						}
						else  {
							idx = page_idx*7;
						}

						
						for (let i=0;i<7;i++){
			   				img_name1.push('/'+img_file[idx+i]+'/Score0.jpg?raw=true');
							img_name2.push('/'+img_file[idx+i]+'/Bi-Mix.jpg?raw=true');
							img_name3.push('/'+img_file[idx+i]+'/HT.jpg?raw=true');
						}
						page_idx += 1;
						img_1_1 = img_folder+img_name1[0];
						img_1_2 = img_folder+img_name2[0];
						img_1_3 = img_folder+img_name3[0];
						img_2_1 = img_folder+img_name1[1];
						img_2_2 = img_folder+img_name2[1];
						img_2_3 = img_folder+img_name3[1];
						img_3_1 = img_folder+img_name1[2];
						img_3_2 = img_folder+img_name2[2];
						img_3_3 = img_folder+img_name3[2];
						img_4_1 = img_folder+img_name1[3];
						img_4_2 = img_folder+img_name2[3];
						img_4_3 = img_folder+img_name3[3];
						img_5_1 = img_folder+img_name1[4];
						img_5_2 = img_folder+img_name2[4];
						img_5_3 = img_folder+img_name3[4];
						img_6_1 = img_folder+img_name1[5];
						img_6_2 = img_folder+img_name2[5];
						img_6_3 = img_folder+img_name3[5];
						img_7_1 = img_folder+img_name1[6];
						img_7_2 = img_folder+img_name2[6];
						img_7_3 = img_folder+img_name3[6];
						
			
						document.getElementById("pic-1-1").src = img_1_1;
						document.getElementById("pic-1-2").src = img_1_2;
						document.getElementById("pic-1-3").src = img_1_3;
						document.getElementById("pic-2-1").src = img_2_1;
						document.getElementById("pic-2-2").src = img_2_2;
						document.getElementById("pic-2-3").src = img_2_3;
						document.getElementById("pic-3-1").src = img_3_1;
						document.getElementById("pic-3-2").src = img_3_2;
						document.getElementById("pic-3-3").src = img_3_3;
						document.getElementById("pic-4-1").src = img_4_1;
						document.getElementById("pic-4-2").src = img_4_2;
						document.getElementById("pic-4-3").src = img_4_3;
						document.getElementById("pic-5-1").src = img_5_1;
						document.getElementById("pic-5-2").src = img_5_2;
						document.getElementById("pic-5-3").src = img_5_3;
						document.getElementById("pic-6-1").src = img_6_1;
						document.getElementById("pic-6-2").src = img_6_2;
						document.getElementById("pic-6-3").src = img_6_3;
						document.getElementById("pic-7-1").src = img_7_1;
						document.getElementById("pic-7-2").src = img_7_2;
						document.getElementById("pic-7-3").src = img_7_3;
						
						
						
						
						document.getElementById("pg"+(page_idx+1)).className = "progressafter" ;
						if (page_idx==4){ //idx==11
							document.getElementById("send").value = "最後一組，確認送出";
							document.getElementById("info").innerHTML = '<label>姓名:</label><input type="text" id="username" name="姓名:" value="Unknown"><label>年齡:</label><input type="text" id="age" name="年齡:" value="Unknown"><label><input type="radio" value="female" name="gender">女性</label><label><input type="radio" value="others" name="gender" checked>其他</label><label><input type="radio" value="male" name="gender">男性</label>';
						}
					}else{
						end();
						page_idx = 0;
						alert('測驗結束，謝謝配合!');
						window.location.href = "https://ypchao1009.github.io/outfit/end_page.html";
					}
			}
			}
			</script>
</html>
